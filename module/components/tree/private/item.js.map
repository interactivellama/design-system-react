{"version":3,"sources":["../../../../.tmp-es/components/tree/private/item.jsx"],"names":["React","PropTypes","classNames","isFunction","Button","Highlighter","EventUtil","KEYS","mapKeyEventCallbacks","TREE_ITEM","handleSelect","event","props","trap","onSelect","node","select","selected","treeIndex","findNextNode","flattenedNodes","nodes","map","flattenedNode","index","indexOf","length","findPreviousNode","handleKeyDownDown","focusedNodeIndex","handleKeyDownUp","handleKeyDownLeft","parent","onExpand","expand","expanded","handleKeyDownEnter","handleKeyDown","callbacks","DOWN","callback","evt","UP","LEFT","ENTER","handleFocus","target","currentTarget","getTabIndex","selectedNodeIndexes","Item","isSelected","isFocused","treeId","id","level","onNodeBlur","component","treeHasFocus","focus","searchTerm","label","displayName","propTypes","htmlId","string","isRequired","oneOfType","number","object","func","arrayOf","bool","defaultProps"],"mappings":"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","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n// # Tree Item Component\n\n// Implements the [Tree design pattern](https://www.lightningdesignsystem.com/components/tree/) in React.\n\n// ## Dependencies\n\n// ### React\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// ### classNames\nimport classNames from 'classnames';\n\n// ### isFunction\nimport isFunction from 'lodash.isfunction';\n\nimport Button from '../../button';\n\nimport Highlighter from '../../utilities/highlighter';\n\n// ### Event Helpers\nimport EventUtil from '../../../utilities/event';\n\nimport KEYS from '../../../utilities/key-code';\nimport mapKeyEventCallbacks from '../../../utilities/key-callbacks';\n\n// ## Constants\nimport { TREE_ITEM } from '../../../utilities/constants';\n\nconst handleSelect = (event, props) => {\n\tEventUtil.trap(event);\n\n\tif (isFunction(props.onSelect)) {\n\t\tprops.onSelect(event, {\n\t\t\tnode: props.node,\n\t\t\tselect: !props.node.selected,\n\t\t\ttreeIndex: props.treeIndex,\n\t\t});\n\t}\n};\n\nconst findNextNode = (flattenedNodes, node) => {\n\tconst nodes = flattenedNodes.map((flattenedNode) => flattenedNode.node);\n\tconst index = nodes.indexOf(node);\n\treturn flattenedNodes[(index + 1) % flattenedNodes.length];\n};\n\nconst findPreviousNode = (flattenedNodes, node) => {\n\tconst nodes = flattenedNodes.map((flattenedNode) => flattenedNode.node);\n\tlet index = nodes.indexOf(node) - 1;\n\tif (index < 0) {\n\t\tindex += flattenedNodes.length;\n\t}\n\treturn flattenedNodes[index];\n};\n\nconst handleKeyDownDown = (event, props) => {\n\tif (props.focusedNodeIndex === props.treeIndex) {\n\t\t// Select the next visible node\n\t\tconst flattenedNode = findNextNode(props.flattenedNodes, props.node);\n\t\tprops.onSelect(\n\t\t\tevent,\n\t\t\t{\n\t\t\t\tnode: flattenedNode.node,\n\t\t\t\tselect: true,\n\t\t\t\ttreeIndex: flattenedNode.treeIndex,\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n};\n\nconst handleKeyDownUp = (event, props) => {\n\tif (props.focusedNodeIndex === props.treeIndex) {\n\t\t// Go to the previous visible node\n\t\tconst flattenedNode = findPreviousNode(props.flattenedNodes, props.node);\n\t\tprops.onSelect(\n\t\t\tevent,\n\t\t\t{\n\t\t\t\tnode: flattenedNode.node,\n\t\t\t\tselect: true,\n\t\t\t\ttreeIndex: flattenedNode.treeIndex,\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n};\n\nconst handleKeyDownLeft = (event, props) => {\n\tconst nodes = props.flattenedNodes.map((flattenedNode) => flattenedNode.node);\n\tconst index = nodes.indexOf(props.parent);\n\tif (index !== -1) {\n\t\tprops.onExpand(event, {\n\t\t\tnode: props.parent,\n\t\t\texpand: !props.parent.expanded,\n\t\t\ttreeIndex: props.flattenedNodes[index].treeIndex,\n\t\t});\n\t\tprops.onSelect(\n\t\t\tevent,\n\t\t\t{\n\t\t\t\tnode: props.parent,\n\t\t\t\tselect: true,\n\t\t\t\ttreeIndex: props.flattenedNodes[index].treeIndex,\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t}\n};\n\nconst handleKeyDownEnter = (event, props) => {\n\thandleSelect(event, props);\n};\n\nconst handleKeyDown = (event, props) => {\n\tmapKeyEventCallbacks(\n\t\tevent,\n\t\t{\n\t\t\tcallbacks: {\n\t\t\t\t[KEYS.DOWN]: { callback: (evt) => handleKeyDownDown(evt, props) },\n\t\t\t\t[KEYS.UP]: { callback: (evt) => handleKeyDownUp(evt, props) },\n\t\t\t\t[KEYS.LEFT]: { callback: (evt) => handleKeyDownLeft(evt, props) },\n\t\t\t\t[KEYS.ENTER]: { callback: (evt) => handleKeyDownEnter(evt, props) },\n\t\t\t},\n\t\t},\n\t\ttrue\n\t);\n};\n\nconst handleFocus = (event, props) => {\n\tif (!props.focusedNodeIndex && event.target === event.currentTarget) {\n\t\thandleSelect(event, props);\n\t}\n};\n\nconst getTabIndex = (props) => {\n\tif (\n\t\tprops.treeIndex === props.focusedNodeIndex ||\n\t\t(props.selectedNodeIndexes.length === 0 &&\n\t\t\tprops.treeIndex === props.flattenedNodes[0].treeIndex)\n\t) {\n\t\treturn 0;\n\t}\n\treturn -1;\n};\n\n/**\n * A Tree Item is a non-branching node in a hierarchical list.\n */\nconst Item = (props) => {\n\tconst isSelected = props.node.selected;\n\tconst isFocused = props.treeIndex === props.focusedNodeIndex;\n\n\treturn (\n\t\t<li\n\t\t\tid={`${props.treeId}-${props.node.id}`}\n\t\t\trole=\"treeitem\"\n\t\t\taria-level={props.level}\n\t\t\taria-selected={isSelected ? 'true' : 'false'}\n\t\t\ttabIndex={getTabIndex(props)}\n\t\t\tonKeyDown={(event) => handleKeyDown(event, props)}\n\t\t\tonFocus={(event) => handleFocus(event, props)}\n\t\t\tonBlur={props.onNodeBlur}\n\t\t\tref={(component) => {\n\t\t\t\tif (props.treeHasFocus && component && isFocused) {\n\t\t\t\t\tcomponent.focus();\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{/* eslint-disable jsx-a11y/no-static-element-interactions */}\n\t\t\t<div\n\t\t\t\tclassName={classNames('slds-tree__item', {\n\t\t\t\t\t'slds-is-selected': isSelected,\n\t\t\t\t})}\n\t\t\t\tonClick={(event) => {\n\t\t\t\t\thandleSelect(event, props);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{/* eslint-enable jsx-a11y/no-static-element-interactions */}\n\t\t\t\t<Button\n\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\tassistiveText=\"\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\ticonName=\"chevronright\"\n\t\t\t\t\ticonSize=\"small\"\n\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\tclassName=\"slds-m-right--small slds-is-disabled\"\n\t\t\t\t\tdisabled\n\t\t\t\t/>\n\t\t\t\t{/* eslint-disable no-script-url */}\n\t\t\t\t<a\n\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\thref=\"javascript:void(0)\"\n\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-interactive-element-to-noninteractive-role\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\tclassName=\"slds-truncate\"\n\t\t\t\t>\n\t\t\t\t\t{/* eslint-enable no-script-url */}\n\t\t\t\t\t<Highlighter search={props.searchTerm}>{props.label}</Highlighter>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\n// ### Display Name\n// Always use the canonical component name as the React display name.\nItem.displayName = TREE_ITEM;\n\n// ### Prop Types\nItem.propTypes = {\n\t/**\n\t * HTML `id` of the wrapping container element joined with the `id` of the node. This will recursively increase as the tree depth increases.\n\t */\n\thtmlId: PropTypes.string.isRequired,\n\t/**\n\t * The text of the tree item.\n\t */\n\tlabel: PropTypes.oneOfType([PropTypes.node, PropTypes.string]).isRequired,\n\t/**\n\t * The number of nestings. Determines the ARIA level and style alignment.\n\t */\n\tlevel: PropTypes.number.isRequired,\n\t/**\n\t * The current node that is being rendered.\n\t */\n\tnode: PropTypes.object.isRequired,\n\t/**\n\t * This function triggers when the expand or collapse icon is clicked or due to keyboard navigation.\n\t */\n\tonExpand: PropTypes.func.isRequired,\n\t/**\n\t * Function that will run whenever an item or branch is selected (click or keyboard).\n\t */\n\tonSelect: PropTypes.func,\n\t/**\n\t * Highlights term if found in node label\n\t */\n\tsearchTerm: PropTypes.string,\n\t/**\n\t * Unique id used for a prefix of all tree nodes\n\t */\n\ttreeId: PropTypes.string,\n\t/**\n\t * Location of node (zero index). First node is `0`. It's first child is `0-0`. This can be used to modify your nodes without searching for the node. This index is only valid if the `nodes` prop is the same as at the time of the event.\n\t */\n\ttreeIndex: PropTypes.string,\n\t/**\n\t * Flattened tree structure.\n\t */\n\tflattenedNodes: PropTypes.arrayOf(PropTypes.object),\n\t/**\n\t * Tree indexes of nodes that are currently selected.\n\t */\n\tselectedNodeIndexes: PropTypes.arrayOf(PropTypes.string),\n\t/**\n\t * Tree index of the node that is currently focused.\n\t */\n\tfocusedNodeIndex: PropTypes.string,\n\t/**\n\t * Callback for when a node is blurred.\n\t */\n\tonNodeBlur: PropTypes.func,\n\t/**\n\t * Sets focus on render.\n\t */\n\ttreeHasFocus: PropTypes.bool,\n\t/**\n\t * This node's parent.\n\t */\n\tparent: PropTypes.object,\n};\n\nItem.defaultProps = {\n\tselected: false,\n\tselectedNodeIndexes: [],\n};\n\nexport default Item;\n"],"file":"item.js"}